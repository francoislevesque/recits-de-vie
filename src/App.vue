<template>
  <div>
    <div class="lg:p-10 bg-blue-900">
      <div class="container p-5 max-w-2xl">
        <a href="http://cffp.recherche.usherbrooke.ca/">
          <img
            class="mx-auto w-48 mb-10"
            src="@/assets/logo.png"
            alt="Logo chaire de recherche en fiscalité et finances publiques de l'Université de Sherbrooke"
          >
        </a>
        <p class="text-3xl font-bold text-blue-100 lg:text-4xl leading-tight mb-1">
          Récits de vie
        </p>
        <p class="text-blue-300 lg:text-2xl leading-tight mb-8">
          Comment évoluent les prélèvements fiscaux, les prestations et les dépenses publiques pour une contribuable au cours de sa vie?
        </p>
      </div>
      <div class="container max-w-2xl bg-blue-100">
        <div class="p-8 lg:p-10">
          <p class="mb-10">
            Nous allons suivre la vie d'Ella, qui présente les caractéristiques représentatives d’une femme québécoise, à compter de <b>18 ans</b> jusqu’à son décès à <b>87 ans</b>, pour 3 scénarios de vie distincts :
          </p>
          <div class="mb-10">
            <div class="pl-6 border-blue-500 border-l-4 mb-10">
              <div class="flex items-baseline mb-3">
                <h2 class="text-lg lg:text-xl font-bold mr-4">
                  Scénario 1
                </h2>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="65.649"
                  height="86.892"
                  viewBox="0 0 65.649 86.892"
                  class="h-4 w-auto text-blue-700"
                ><g transform="translate(-147.54 -111.445)"><g transform="translate(147.54 162.719)"><path
                  d="M198.988,285.357a27.077,27.077,0,0,0-13.02-3.312H174.761a27.215,27.215,0,0,0-27.221,27.221v8.4h65.649v-8.4A27.211,27.211,0,0,0,198.988,285.357Z"
                  fill="currentColor"
                  transform="translate(-147.54 -282.045)"
                /></g><g transform="translate(159.279 111.445)"><g transform="translate(0)"><path
                  d="M207.687,111.445c-11.628,0-21.087,9.993-21.087,22.28a22.423,22.423,0,0,0,12.073,20.137,20.053,20.053,0,0,0,18.027,0,22.423,22.423,0,0,0,12.073-20.137C228.773,121.438,219.315,111.445,207.687,111.445Z"
                  fill="currentColor"
                  transform="translate(-186.6 -111.445)"
                /></g></g></g></svg>
              </div>

              <p class="">
                Ella vit seule, sans enfant, durant toute sa vie.
              </p>
            </div>
            <div class="pl-6 border-blue-500 border-l-4 mb-10">
              <div class="flex items-baseline mb-3">
                <h2 class="text-lg lg:text-xl font-bold mr-4">
                  Scénario 2
                </h2>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="253.626"
                  height="86.892"
                  viewBox="0 0 253.626 86.892"
                  class="h-4 w-auto text-blue-700"
                ><g transform="translate(-291.321 -142.218)"><g transform="translate(143.781 30.773)"><g transform="translate(147.54 162.719)"><path
                  d="M198.988,285.357a27.077,27.077,0,0,0-13.02-3.312H174.761a27.215,27.215,0,0,0-27.221,27.221v8.4h65.649v-8.4A27.211,27.211,0,0,0,198.988,285.357Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(159.279 111.445)"><g transform="translate(0)"><path
                  d="M207.687,111.445c-11.628,0-21.087,9.993-21.087,22.28a22.423,22.423,0,0,0,12.073,20.137,20.053,20.053,0,0,0,18.027,0,22.423,22.423,0,0,0,12.073-20.137C228.773,121.438,219.315,111.445,207.687,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g><g transform="translate(218.781 30.773)"><g transform="translate(147.54 162.719)"><path
                  d="M198.988,285.357a27.077,27.077,0,0,0-13.02-3.312H174.761a27.215,27.215,0,0,0-27.221,27.221v8.4h65.649v-8.4A27.211,27.211,0,0,0,198.988,285.357Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(159.279 111.445)"><g transform="translate(0)"><path
                  d="M207.687,111.445c-11.628,0-21.087,9.993-21.087,22.28a22.423,22.423,0,0,0,12.073,20.137,20.053,20.053,0,0,0,18.027,0,22.423,22.423,0,0,0,12.073-20.137C228.773,121.438,219.315,111.445,207.687,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g><g transform="translate(441.321 166.944)"><g transform="translate(0 36.683)"><path
                  d="M184.348,284.415a19.372,19.372,0,0,0-9.315-2.37h-8.018A19.471,19.471,0,0,0,147.54,301.52v6.008h46.968V301.52A19.468,19.468,0,0,0,184.348,284.415Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(8.399 0)"><g transform="translate(0)"><path
                  d="M201.686,111.445c-8.319,0-15.086,7.15-15.086,15.94a16.042,16.042,0,0,0,8.638,14.407,14.346,14.346,0,0,0,12.9,0,16.042,16.042,0,0,0,8.638-14.407C216.772,118.595,210.006,111.445,201.686,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g><g transform="translate(497.979 166.944)"><g transform="translate(0 36.683)"><path
                  d="M184.348,284.415a19.372,19.372,0,0,0-9.315-2.37h-8.018A19.471,19.471,0,0,0,147.54,301.52v6.008h46.968V301.52A19.468,19.468,0,0,0,184.348,284.415Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(8.399 0)"><g transform="translate(0)"><path
                  d="M201.686,111.445c-8.319,0-15.086,7.15-15.086,15.94a16.042,16.042,0,0,0,8.638,14.407,14.346,14.346,0,0,0,12.9,0,16.042,16.042,0,0,0,8.638-14.407C216.772,118.595,210.006,111.445,201.686,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g></g></svg>
              </div>
              <p class="">
                Ella forme un couple à l’âge de 27 ans, a deux enfants et demeure en couple jusqu’à 82 ans, son âge lors du décès de son conjoint.
              </p>
            </div>
            <div class="pl-6 border-blue-500 border-l-4 mb-10">
              <div class="flex items-baseline mb-3">
                <h2 class="text-lg lg:text-xl font-bold mr-4">
                  Scénario 3
                </h2>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="121.968"
                  height="86.892"
                  viewBox="0 0 121.968 86.892"
                  class="h-4 w-auto text-blue-700"
                ><g transform="translate(-634.321 -142.218)"><g transform="translate(486.781 30.773)"><g transform="translate(147.54 162.719)"><path
                  d="M198.988,285.357a27.077,27.077,0,0,0-13.02-3.312H174.761a27.215,27.215,0,0,0-27.221,27.221v8.4h65.649v-8.4A27.211,27.211,0,0,0,198.988,285.357Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(159.279 111.445)"><g transform="translate(0)"><path
                  d="M207.687,111.445c-11.628,0-21.087,9.993-21.087,22.28a22.423,22.423,0,0,0,12.073,20.137,20.053,20.053,0,0,0,18.027,0,22.423,22.423,0,0,0,12.073-20.137C228.773,121.438,219.315,111.445,207.687,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g><g transform="translate(709.321 166.944)"><g transform="translate(0 36.683)"><path
                  d="M184.348,284.415a19.372,19.372,0,0,0-9.315-2.37h-8.018A19.471,19.471,0,0,0,147.54,301.52v6.008h46.968V301.52A19.468,19.468,0,0,0,184.348,284.415Z"
                  transform="translate(-147.54 -282.045)"
                  fill="currentColor"
                /></g><g transform="translate(8.399 0)"><g transform="translate(0)"><path
                  d="M201.686,111.445c-8.319,0-15.086,7.15-15.086,15.94a16.042,16.042,0,0,0,8.638,14.407,14.346,14.346,0,0,0,12.9,0,16.042,16.042,0,0,0,8.638-14.407C216.772,118.595,210.006,111.445,201.686,111.445Z"
                  transform="translate(-186.6 -111.445)"
                  fill="currentColor"
                /></g></g></g></g></svg>
              </div>
              <p class="">
                Ella forme un couple, a un seul enfant et se sépare de son conjoint à 40 ans. Ella conserve la garde exclusive de son enfant mineur par la suite, tout en demeurant célibataire pour le reste de sa vie. 
              </p>
            </div>
          </div>
          <p class="">
            Le <span class="revenu">revenu</span>, les <span class="prelevements">prélèvements</span>, les <span class="prestations">prestations financières</span> et la valeur des <span class="benefices">services publics</span> reçus sont présentés sur une <b>base annuelle</b> et représentent ce qui est payé et obtenu par Ella et, s’il y a lieu, son conjoint Luis et ses enfants mineurs.
          </p>
        </div>
      </div>
    </div>
    <Scrollama
      :offset="0.9"
      class="bg-blue-200"
      @step-enter="stepEnterHandler"
    >
      <notice
        data-max="20"
        data-category="revenu"
        data-tooltip="20,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Aux études collégiales | 
          <span class="text-gray-600">18 à 20 ans</span> 
        </h2>
        À <b>18 ans</b>, Ella habite chez ses parents, poursuit des études collégiales et travaille à temps partiel. Ella n’a pas encore formé de couple. Dans tous les scénarios, son <span class="revenu">revenu</span> est identique, soit un peu plus de <b>7 500 $</b> par année.
      </notice>
      <div
        slot="graphic"
        class="h-screen"
      >
        <viz
          ref="viz"
          :filters="filters"
        />
      </div> 
      
      <notice
        data-max="20"
        data-category="prelevements"
        data-tooltip="20,prelevements"
        push-bottom
      >
        Pendant ces premières années, les <span class="prelevements">prélèvements</span> s'élèvent à environ <b>1 500 $</b>.
      </notice>
      <notice
        data-max="20"
        data-category="prelevements"
        data-tooltip="20,prelevements"
        push-bottom
      >
        Ils sont à <b>76%</b> composés de <span class="prelevements">taxes à la consommation</span>.
      </notice>
      <notice
        data-max="20"
        data-category="prestations"
        data-tooltip="20,prestations"
        push-bottom
      >
        En contrepartie, Ella reçoit également près de 600$ en <span class="prestations">Crédit d'impôt pour solidarité</span> et <span class="prestations">Crédit pour TPS.</span>
      </notice>
      <notice
        data-max="20"
        data-category="benefices"
        data-tooltip="20,benefices"
        push-bottom
      >
        La valeur des <span class="benefices">services publics</span> s'élève à plus de <b>14 000 $</b>. Comme Ella va au cégep, la majorité de cette valeur provient des <b>services d'enseignement supérieur</b>.
      </notice>
      <notice
        data-min="21"
        data-max="26"
        data-category="revenu"
        data-tooltip="26,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Début de carrière | 
          <span class="text-gray-600 mr-1">21 à 26 ans</span> 
        </h2>
        À 21 ans, Ella quitte le domicile de ses parents et commence à travailler à temps plein. Son <span class="revenu">salaire</span> initial est d’un peu plus de <b>35 000 $</b> et augmente progressivement chaque année, atteignant plus de <b>42 000 $</b> à 26 ans.
      </notice>
      <notice
        data-min="21"
        data-max="26"
        data-category="prelevements"
        data-tooltip="26,prelevements"
        push-bottom
      >
        Les <span class="prelevements">prélèvements fiscaux</span> augmentent également en fonction du revenu et passent de <b>8 500 $</b> à plus de <b>11 000 $</b>. 
      </notice>
      <notice
        data-min="21"
        data-max="26"
        data-category="prelevements"
        data-tooltip="26,prelevements"
        push-bottom
      >
        <span class="prelevements">L’impôt sur le revenu fédéral et du Québec</span> constituent alors <b>un peu plus de la moitié</b> des prélèvements. 
      </notice>
      <notice
        data-min="21"
        data-max="26"
        data-category="prestations"
        data-tooltip="26,prestations"
        push-bottom
      >
        Les <span class="prestations">prestations</span> se composent du <span class="prestations">crédit pour TPS</span> et du <span class="prestations">crédit d’impôt pour solidarité</span> qui totalisent plus de <b>1 000 $</b>. Ces montants diminuent lorsque le salaire d’Ella augmente.
      </notice>
      <notice
        data-min="21"
        data-max="26"
        data-category="benefices"
        data-tooltip="26,benefices"
        push-bottom
      >
        La valeur moyenne des <span class="benefices">services publics de soins de santé reçus</span> est d’environ <span class="whitespace-no-wrap">2&nbsp;000 $</span> par année. Cette valeur fluctue selon l’âge et s’établit à environ <b class="whitespace-no-wrap">2&nbsp;700 $</b> à 26 ans.
      </notice>
      <notice
        data-min="27"
        data-max="28"
        data-category="revenu"
        data-scenarios="1,2"
        data-tooltip="28,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Vie en couple | 
          <span class="text-gray-600 mr-1">27 à 28 ans</span> 
        </h2>
        C'est à <b>27 ans</b>, qu'Ella forme un couple avec Luis. En conséquence les scénarios 2 et 3 prennent en compte le <span class="revenu">revenu du ménage</span> de plus de <b>93 000$</b> à la formation du couple. 
      </notice>
      <notice
        data-min="27"
        data-max="28"
        data-category="prelevements"
        data-scenarios="1,2"
        data-tooltip="28,prelevements"
        push-bottom
      >
        Les <span class="prelevements">prélèvements</span> assumés par Ella et Luis sont d’environ <b class="whitespace-no-wrap">26&nbsp;500 $</b>.
      </notice>
      <notice
        data-min="27"
        data-max="28"
        data-category="benefices,prestations"
        data-scenarios="1,2"
        data-tooltip="28,benefices"
        push-bottom
      >
        Le couple ne bénéficie au départ d’aucune <span class="prestations">prestation financière</span>. La valeur des <span class="benefices">services publics</span> reçus, composés exclusivement des <span class="benefices">soins de santé</span>, est de près de <b>4 300 $</b>. 
      </notice>
      <notice
        data-min="29"
        data-max="29"
        data-category="revenu"
        data-scenarios="1,2"
        data-tooltip="29,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Naissance du premier enfant | 
          <span class="text-gray-600 mr-1">29 ans</span> 
        </h2>
        À la naissance de son premier enfant, Ella cesse de travailler pendant 1 an dans les scénarios 2 et 3. Le <span class="revenu">revenu de salaire</span> du ménage diminue alors de moitié.
      </notice>
      <notice
        data-min="29"
        data-max="29"
        data-category="prestations"
        data-scenarios="1,2"
        data-tooltip="29,prestations"
        push-bottom
      >
        Les nouveaux parents touchent des <span class="prestations">prestations</span> du <span class="prestations">Régime québécois d’assurance parentale</span> s’élevant à près de <b>31 000 $</b>. Des <span class="prestations">prestations financières pour la famille</span> d’environ <b>5 000 $</b> s’ajoutent également.
      </notice>
      <notice
        data-min="29"
        data-max="29"
        data-category="prelevements"
        data-scenarios="1,2"
        data-tooltip="29,prelevements"
        push-bottom
      >
        Les <span class="prelevements">prélèvements</span> passent à un peu moins de <b>20 500 $</b>.
      </notice>
      <notice
        data-min="29"
        data-max="29"
        data-category="benefices"
        data-scenarios="1,2"
        data-tooltip="29,benefices"
        push-bottom
      >
        La valeur des <span class="benefices">soins de santé</span> reçus par la famille l’année de l’arrivée de l’enfant est d’environ <b>14 000$</b>.  
      </notice>
      <notice
        data-min="30"
        data-max="30"
        data-category="benefices,revenu"
        data-scenarios="1,2"
        data-tooltip="30,benefices"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Retour au travail | 
          <span class="text-gray-600 mr-1">30 ans</span> 
        </h2>
        Lorsque l’enfant a 1 an, Ella retourne sur le <span class="revenu">marché du travail</span> et les <span class="benefices">services de garde subventionnés</span> sont utilisés. La valeur de ce <span class="benefices">service public</span> est d’un peu plus de <b>10 000$</b> par année par enfant.  
      </notice>
      <notice
        data-min="31"
        data-max="31"
        data-category="revenu"
        data-scenarios="1"
        data-tooltip="31,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Deuxième enfant | 
          <span class="text-gray-600 mr-1">31 ans</span> 
        </h2>
        À 31 ans, dans le cas du scénario 2, Ella cesse à nouveau de travailler pendant un an suite à l’arrivée du deuxième enfant. Le <span class="revenu">revenu</span> du couple est modifié en conséquence.  
      </notice>
      <notice
        data-min="34"
        data-max="39"
        data-scenarios="1,2"
        data-category="benefices"
        data-tooltip="39,benefices"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2 leading-tight">
          Entrée à la maternelle et éducation primaire des 2 enfants (scénario 2), 1 seul enfant (scénario 3) | 
          <span class="text-gray-600 mr-1">34 à 39 ans</span> 
        </h2>
        Lorsque Ella a <b>34 ans</b>, le premier enfant entre à la maternelle, la valeur des <span class="benefices">services publics</span> reçus diminue, car l’utilisation des <span class="benefices">services de garde à contribution réduite</span> est remplacée par les <span class="benefices">services de garde en milieu scolaire</span> et les <span class="benefices">services d’enseignement primaire</span>.
      </notice>
      <notice
        data-min="40"
        data-max="40"
        data-category="revenu"
        data-scenarios="2"
        data-tooltip="40,revenu"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Rupture | 
          <span class="text-gray-600 mr-1">40 ans</span> 
        </h2>
        À <b>40 ans</b>, le scénario 3 montre l’effet de la rupture d’Ella et de son conjoint. Celle-ci conserve la garde exclusive de son enfant unique. Le revenu n’est plus constitué que du salaire d’Ella, soit près de <b>53 000 $</b>.
      </notice>
      <notice
        data-min="40"
        data-max="46"
        data-category="prelevements"
        data-scenarios="2"
        data-tooltip="46,prelevements"
        push-bottom
      >
        Dans le scénario 3, suite à la rupture, les <span class="prelevements">prélèvements</span> passent à environ <b>15 000 $</b>. 
      </notice>
      <notice
        data-min="40"
        data-max="46"
        data-category="prestations"
        data-scenarios="2"
        data-tooltip="46,prestations"
        push-bottom
      >
        Toujours en situation monoparentale, les <span class="prestations">prestations financières</span> d’Ella sont majorées. Elles passent à <b>7 500 $</b>. 
      </notice>
      <notice
        data-min="47"
        data-max="47"
        data-category="prestations,benefices"
        data-scenarios="1,2"
        data-tooltip="47,prestations"
        data-force-highlight="allocation-cad-enfants,paiement-soutien-enfants,credit-solidarite,credit-tps,service-es"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Le premier enfant devient majeur | 
          <span class="text-gray-600 mr-1">47 ans</span> 
        </h2>
        Lorsque le premier enfant atteint <b>18 ans</b>, les <span class="prestations">prestations financières</span> diminuent et la valeur des <span class="benefices">services publics</span> attribués à cet enfant n’est plus prise en compte.
        <br>
        Dans le cas du scénario où Ella est monoparentale, les <span class="prestations">prestations financières</span> <b class="whitespace-no-wrap">(7&nbsp;500 $)</b> disparaissent complètement et une diminution de la valeur des <span class="benefices">services publics</span> d'environ <b class="whitespace-no-wrap">13&nbsp;700 $</b> est alors observée.  
      </notice>
      <notice
        data-min="49"
        data-max="49"
        data-category="prestations,benefices"
        data-scenarios="1"
        data-tooltip="49,benefices"
        data-force-highlight="allocation-cad-enfants,paiement-soutien-enfants,service-es"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Deuxième enfant devient majeur | 
          <span class="text-gray-600 mr-1">49 ans</span> 
        </h2>
        Dans le cas du scénario 2, une deuxième réduction des <span class="prestations">prestations financières</span> et de la valeur des <span class="benefices">services publics</span> reçus survient lorsqu’Ella a <b>49 ans</b>, soit lorsque le deuxième enfant atteint <b>18 ans</b>.
      </notice>
      <notice
        data-min="60"
        data-max="74"
        data-category="revenu"
        data-tooltip="60,revenu,left"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Retraite | 
          <span class="text-gray-600 mr-1">60 à 74 ans </span> 
        </h2>
        Dans tous les scénarios Ella prend sa retraite à <b>60 ans</b>. Luis prend sa retraite au même moment qu’Ella (scénario 2). Le <span class="revenu">revenu</span> provient alors de leurs fonds de retraite privé. Il est moins important qu’en période de vie active.
      </notice>

      <notice
        data-min="60"
        data-max="74"
        data-category="prestations"
        data-scenarios="1"
        data-tooltip="60,prestations,left"
        push-bottom
      >
        Ella touche les <span class="prestations">prestations du Régime de rentes du Québec</span> à 61 ans. Dans le scénario 2, Luis touche ces prestations dès la prise de la retraite. Tous deux obtiennent la <span class="prestations">pension de la sécurité de la vieillesse</span> à <b>65 ans</b>.
      </notice>
      
      <notice
        data-min="60"
        data-max="74"
        data-tooltip="60,prelevements,left"
        data-category="prelevements"
        push-bottom
      >
        Les <span class="prelevements">prélèvements</span> diminuent. Les <b>cotisations sociales</b> prélevées sur le salaire sont remplacées par les <span class="prelevements">cotisations au régime d’assurance-médicament</span> et au <span class="prelevements">Fonds des service de santé</span>. 
      </notice>

      <notice
        data-min="75"
        data-max="81"
        data-category="prestations"
        data-tooltip="75,prestations,left"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Retraite | 
          <span class="text-gray-600 mr-1">75 à 81 ans</span> 
        </h2>
        À compter de <b>75 ans</b>, Ella touche le <span class="prestations">crédit d’impôt pour maintien à domicile</span>. 
      </notice>

      <notice
        data-min="82"
        data-max="82"
        data-category="benefices,prelevements,revenu"
        data-scenarios="1"
        data-tooltip="82,prelevements,left"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Décès du conjoint | 
          <span class="text-gray-600 mr-1">82 ans</span> 
        </h2>
        Luis décède lorsque Ella est âgée de <b>82 ans</b> (scénario 2), modifiant le <span class="revenu">revenu</span>, la valeur des <span class="prelevements">prélèvements</span> et celle des <span class="benefices">bénéfices publics</span> reçus. 
      </notice>

      <notice
        data-min="83"
        data-max="87"
        data-category="benefices"
        data-tooltip="83,benefices,left"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Fin de vie | 
          <span class="text-gray-600 mr-1">83 à 87 ans</span> 
        </h2>
        À l’âge adulte, la valeur des <span class="benefices">services de soins de santé</span> reçus augmente avec l’âge. Dans le cas où Ella vit seule à la retraite (scénarios 1 et 3), cette valeur passe d’un peu moins de <b>6 000 $</b> à 65 ans, à plus de <b>28 000 $</b> à 85 ans.
      </notice>

      <notice
        data-min="18"
        data-max="87"
        data-amounts="false"
        data-visible-category="prestations,benefices,prelevements"
        data-show-selection="false"
        push-bottom
      >
        <h2 class="text-lg font-bold mb-2">
          Bénéfices publics et prélèvements au cours d’une vie
        </h2>
        Au cours d'une vie, les 3 ménages d’Ella bénéficient de <span class="benefices">services publics</span>, touchent des <span class="prestations">prestations</span> et, en contrepartie assument des <span class="prelevements">prélèvements</span>. <b>Nous pouvons observer simultanément ces flux monétaires</b>.
      </notice>

      <notice
        data-min="18"
        data-max="87"
        data-amounts="false"
        data-show-selection="false"
        data-show-substraction="true"
        push-bottom
      >
        En effectuant la <b>différence entre ce qui a été reçu et ce qui a été payé</b>, il est possible de voir si le ménage d’Ella retire un bénéfice net (valeur positive) ou encore si celui-ci est contributeur net (valeur négative) au cours d’une année de vie en particulier.
      </notice>

      <notice
        data-min="29"
        data-max="35"
        data-amounts="false"
        data-scenarios="1,2"
        data-show-substraction="true"
        push-bottom
      >
        Dans le cas des scénarios 2 et 3, on remarque <b>l’effet de l’arrivée des enfants</b> et des <span class="prestations">bénéfices publics</span> reçus lorsqu’ils sont d’âge préscolaire.
      </notice>

      <notice
        data-min="40"
        data-max="46"
        data-amounts="false"
        data-scenarios="2"
        data-show-substraction="true"
        push-bottom
      >
        Suite à la <b>rupture du couple</b>, les <span class="prestations">bénéfices publics</span> obtenus par la famille monoparentale (scénario 3) surpassent les <span class="prelevements">prélèvements</span>, jusqu’à ce que l’enfant atteigne 18 ans.
      </notice>

      <notice
        data-min="61"
        data-max="87"
        data-amounts="false"
        data-show-substraction="true"
        push-bottom
      >
        Dans tous les cas, les ménages d’Ella sont <span class="prestations">bénéficiaires nets</span> à compter du moment où celle-ci touche les prestations du <span class="prestations">Régime de rentes du Québec</span>. 
      </notice>

      <notice
        data-min="18"
        data-max="87"
        data-amounts="false"
        data-show-cumul="true"
        data-show-selection="false"
        push-bottom
      >
        Le <b>cumul annuel des bénéfices et prélèvements</b> permet d’évaluer, pour une année particulière, la différence entre, d’une part, l’ensemble des <span class="prestations">prestations</span> et <span class="benefices">services publics</span> obtenus jusque-là au cours de la vie adulte et, d’autre part l’ensemble des <span class="prelevements">prélèvements</span> assumés. 
      </notice>

      <notice
        data-min="18"
        data-max="87"
        data-amounts="false"
        data-show-cumul="true"
        data-show-selection="false"
        push-bottom
      >
        La <b>présence d’enfant</b> et les <b>bénéfices publics offerts à deux retraités plutôt qu’un seul</b> ont pour effet de devancer le moment à partir duquel le ménage d’Ella commence à obtenir rétrospectivement davantage que ce qu’il a versé sur un cycle de vie complet. 
        <br>
        <br>
        Ce moment arrive lorsque Ella a :
        <ul class="list-disc ml-5">
          <li><b>74 ans</b> pour le scénario 2</li>
          <li>
            <b>80 ans</b> pour le scénario 3
          </li>
          <li><b>85 ans</b> pour le scénario 1</li>
        </ul>
      </notice>

      <notice
        data-min="18"
        data-max="87"
        data-amounts="false"
        data-show-cumul="true"
        data-show-selection="false"
        push-bottom
      >
        De façon générale, les <span class="prelevements">prélèvements</span> dominent pendant la <b>vie active</b> tandis que la valeur des <span class="prestations">bénéfices publics</span> est plus importante à la <b>retraite</b>. 
        <br>
        <br>
        Ella assume une charge fiscale importante à certains moments de sa vie sans toujours obtenir une contrepartie équivalente sous forme de bénéfices publics, cependant, dans son cas, cette situation est temporaire.
      </notice>

      <notice
        v-show="isDesktop"
        data-step="end"
      >
        <h2 class="text-lg font-bold mb-2">
          À vous d'explorer!
        </h2>
        Vous pouvez à présent explorer les données comme bon vous semble. Les informations relatives à une année particulière s’affichent lorsque l’on pointe le curseur sur les graphiques.
      </notice>

      <div data-step="end">
        <span class="text-transparent">.</span>
      </div>
    </Scrollama>
    <viz-interactive
      v-if="isDesktop"
      ref="vizInteractive"
    />
    <div class="py-12 px-6 bg-blue-100">
      <div class="container max-w-2xl">
        <h2 class="text-lg font-semibold mb-3">
          Méthodologie et interprétation
        </h2>
        <p class="text-base mb-5">
          Les calculs sont basés sur le régime fiscal de 2018, le ménage vivant l’ensemble de sa vie dans ce système fiscal. La majorité des caractéristiques de nos personnages sont issues des données produites par Statistique Canada. Pour chacun des paramètres, le cas médian (ou moyen) est retenu afin de baser l’analyse sur les situations les plus représentatives possible.  Il est important de noter que seul un échantillon de services publics et, par conséquent, des bénéfices publics est présenté. Dans le même ordre d’idée, certains prélèvements tels les impôts fonciers n’ont pas été pris en compte.
        </p>
        <p class="text-base mb-5">
          Cette analyse ne doit donc pas être vue comme un bilan précis des gains et bénéfices de la vie dans la société québécoise pour un cheminement de vie donné, mais plutôt comme une représentation de l’évolution des prélèvements fiscaux et des bénéfices publics au cours d’une vie.
        </p>
        <p class="text-base ">
          Les hypothèses sur lesquelles se basent l’ensemble des calculs sont disponibles à : <a
            class="underline text-blue-700"
            href="http://cffp.recherche.usherbrooke.ca/impots-et-services-publics-approche-par-recit-de-vie/"
          >http://cffp.recherche.usherbrooke.ca/impots-et-services-publics-approche-par-recit-de-vie/</a>.
        </p>

        <a
          href="#"
          class="items-center inline-flex px-2 py-2 pr-4 bg-gray-200 rounded mt-8"
        > 
          <svg
            class="inline"
            style="width:24px;height:24px"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"
            />
          </svg>
          <span class="ml-1">Retourner au début</span>
        </a>

        <hr class="my-10">
        <p class="text-base mb-2">
          Travail collectif où ont participé <b>Michaël Robert-Angers</b>, <b>Anna Kerkhoff</b>, <b>Antoine Genest-Grégoire</b> et <b>Luc Godbout</b>.
        </p>
        <p class="text-base mb-2">
          Les auteurs collaborent aux travaux de la <a
            class="underline"
            href="http://cffp.recherche.usherbrooke.ca/"
          >Chaire de recherche en fiscalité et en finances publiques</a>, qu’ils remercient pour l’appui financier qui a rendu possible la réalisation de cet outil.
        </p>
        <p class="text-base">
          Outil interactif conçu et réalisé par <b>François Lévesque</b> (<a
            class="underline"
            href="https://witify.io"
          >Witify</a>) et <b>Thomas Hurtut</b> (<a
            class="underline"
            href="http://www.professeurs.polymtl.ca/thomas.hurtut/"
          >Polytechnique Montréal</a>).
        </p>
      </div>
    </div>
  </div>
</template>

<script>
import "intersection-observer";
import Scrollama from "vue-scrollama";
import Notice from "@/components/Notice";
import Viz from "@/components/Viz";
import debounce from "lodash/debounce";
import VizInteractive from "@/components/VizInteractive";
import { isDesktop } from "./services/responsive";
import { deepCopy } from "./services/utils";

export default {
	components: {
		Scrollama,
		Notice,
		Viz,
		VizInteractive
	},
	data () {
		return {
			isDesktop: isDesktop(),
			filters: {
				agglomerationAverage: true,
				showHighlights: true,
				showAmounts: true,
				showSelection: true,
				showSubstraction: false,
				showCumul: false,
				visible: [18,18],
				selected: [18,20],
				visibleCategories: [],
				selectedCategories: [],
				amounts: [],
				selectedScenarios: [0,1,2],
				firstAppear: true,
				tooltip: null,
				forceHighlight: []
			}
		};
	},
	mounted () {
		window.addEventListener("resize", this.onResize);
	},
	destroyed () {
		window.removeEventListener("resize", this.onResize);
	},
	methods: {
		onResize: debounce(function() {

			this.isDesktop = isDesktop();
			this.$refs.viz.onResize();
			if (this.isDesktop && this.$refs.vizInteractive) {
				this.$refs.vizInteractive.onResize();
			}
		}, 200),
		stepEnterHandler ({element, index, direction}) {

			if (element.getAttribute("data-step") === "end") {
				return;
			}

			let min = parseInt(element.getAttribute("data-min") || 18);
			let max = parseInt(element.getAttribute("data-max"));
      
			let tooltip = element.getAttribute("data-tooltip") || null;
      
			let showAmounts = element.getAttribute("data-amounts") !== "false";
			let showSelection = element.getAttribute("data-show-selection") !== "false";
			let showSubstraction = element.getAttribute("data-show-substraction") === "true";
			let showCumul = element.getAttribute("data-show-cumul") === "true";
      
			let selectedScenarios = element.getAttribute("data-scenarios") || "";
			selectedScenarios = selectedScenarios.split(",").filter(d => d != "").map(d => parseInt(d));
			if (selectedScenarios.length == 0) {
				selectedScenarios= [0,1,2];
			}
      
			let selectedCategories = element.getAttribute("data-category") || "";
			selectedCategories = selectedCategories.split(",").filter(d => d != "");
			if (selectedCategories.length == 0) {
				selectedCategories= ["revenu", "prestations", "benefices", "prelevements"];
			}
      
			let visibleCategories = this.filters.visibleCategories;
			selectedCategories.forEach(c => {
				if (visibleCategories.indexOf(c) === -1) {
					visibleCategories.push(c);
				}
			});
      
			visibleCategories = element.getAttribute("data-visible-category") || "";
			visibleCategories = visibleCategories.split(",").filter(d => d != "");
			if (visibleCategories.length == 0) {
				visibleCategories= this.filters.visibleCategories;
			}
      
			if (tooltip != null) {
				tooltip = tooltip.split(",");
			}
      
			let forceHighlight = element.getAttribute("data-force-highlight") || "";
			forceHighlight = forceHighlight.split(",").filter(d => d != "");
      
			let filters = deepCopy(this.filters);
      
			filters.firstAppear = false;
			filters.tooltip = tooltip;
			filters.selected = [min,max];
			filters.visible = [18,max];
			filters.selectedScenarios = selectedScenarios;
			filters.visibleCategories = visibleCategories;
			filters.selectedCategories = selectedCategories;
			filters.showAmounts = showAmounts;
			filters.showSelection = showSelection;
			filters.showSubstraction = showSubstraction;
			filters.showCumul = showCumul;
			filters.forceHighlight = forceHighlight;
      
			this.filters = filters;
		}
	}
};
</script>

<style>

</style>
